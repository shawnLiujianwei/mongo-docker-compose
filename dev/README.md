## 配置 MongoDB 分片 集群


    
1. 分片服务器  
    * 是一个独立普通的mongod进程，保存数据信息。可以是一个副本集也可以是单独的一台服务器。
2. 配置  `Config Service`    

    * 一般要求至少三个  
    * 是一个独立的mongod进程，保存集群和分片的元数据，即各分片包含了哪些数据的信息。最先开始建立，启用日志功能。像启动普通的mongod一样启动配置服务器，指定configsvr选项。不需要太多的空间和资源，配置服务器的1KB空间相当于真是数据的200MB。保存的只是数据的分布表。当服务不可用，则变成只读，无法分块、迁移数据。
    * 配置服务器是一个普通的mongod进程，所以只需要新开一个实例即可。配置服务器必须开启`1个或则3个，开启2个则会报错`：  
      
        BadValue need either 1 or 3 configdbs 
3. 路由服务器(`Mongos`)
    * 即mongos，起到一个路由的功能，供程序连接。本身不保存数据，在启动时从配置服务器加载集群信息，开启mongos进程需要知道配置服务器的地址，指定configdb选项。